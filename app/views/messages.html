<div class="container space notifications">
	<div class="row" ng-show="showSuccessMessage">
		<div class="col-md-12">
			<div class="alert alert-dismissible alert-success">
				<button type="button" class="close" ng-click="showSuccessMessage = false">×</button>
				Sua mensagem foi enviada com sucesso
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<button class="btn btn-big btn-primary new-notification" data-toggle="modal" data-target="#new-notification">Nova Mensagem</button>
		</div>
	</div>

	<div class="row">
		<div class="col-md-6">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Enviadas</h3>
				</div>
				<div class="panel-body">
					<table class="table table-striped table-hover">
						<thead>
							<tr>
								<th>Assunto</th>
								<th>Data</th>
								<th>Destinatário</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="message in sent">
								<td><a ng-href="./message/{{ message.id }}">{{ message.attributes.subject }}</a></td>
								<td>{{ message.createdAt | date : 'dd/MM/yyyy' }}</td>
								<td>{{ message.attributes.receiverId.attributes.name }}</td>
							</tr>
						</tbody>
						<tfoot></tfoot>
					</table>
				</div>
			</div>
		</div>

		<div class="col-md-6">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Recebidas</h3>
				</div>
				<div class="panel-body">
					<table class="table table-striped table-hover">
						<thead>
							<tr>
								<th>Assunto</th>
								<th>Data</th>
								<th>Remetente</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="message in received" ng-class="{ new : message.attributes.unread }">
								<td><a ng-href="./message/{{ message.id }}">{{ message.attributes.subject }}</a></td>
								<td>{{ message.createdAt | date : 'dd/MM/yyyy' }}</td>
								<td>{{ message.attributes.senderId.attributes.name }}</td>
							</tr>
						</tbody>
						<tfoot></tfoot>
					</table>
				</div>
			</div>
		</div>
	</div>

	<div class="modal" id="new-notification" tabindex="-1" role="dialog" aria-labelledby="new-notificationLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="new-notificationLabel">Nova Mensagem</h4>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label class="control-label" for="recipient">Selecione os destinatários desta mensagem</label>
						<div class="checkbox" ng-repeat="user in users">
							<label>
								<input type="checkbox" ng-model="selected[user.attributes.name]" name="users"> {{ user.attributes.name }}
							</label>
						</div>
						<!-- <div class="checkbox" ng-repeat="group in groups">
							<label>
								<input type="checkbox" ng-model="selected[group.attributes.title]" name="groups"> {{ group.attributes.title }}
							</label>
						</div> -->
					</div>
					<div class="form-group">
						<label class="control-label" for="message">Assunto</label>
						<input type="text" class="form-control" ng-model="subject" id="subject">
					</div>
					<div class="form-group">
						<label class="control-label" for="message">Mensagem</label>
						<textarea class="form-control" ng-model="message" rows="3" id="message"></textarea>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
					<button type="button" ng-click="send()" class="btn btn-primary">Enviar</button>
				</div>
			</div>
		</div>
	</div>
</div>